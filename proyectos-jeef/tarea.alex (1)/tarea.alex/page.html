<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Detalle</title>
  <link rel="stylesheet" href="estilos2.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
</head>
<body>

<button id="back"  onclick="volver()">  <i class="fa-solid fa-arrow-left"></i></button>
<div id="info"></div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
  let itemActual = null;
  let datosHtml = ""; // Variable global
  document.addEventListener("DOMContentLoaded", async () => {
    const params = new URLSearchParams(window.location.search);
    const index = parseInt(params.get("index"));

    let res = await axios.get("./data.json");

    if (!isNaN(index) && index >= 0 && index < res.data.length) {
      itemActual = res.data[index]; 

      const color = document.getElementById("info");
      color.style.background =  `linear-gradient(to bottom, 
        ${itemActual.categoria.colorPrimario || "#ff0000"}, 
        ${itemActual.categoria.colorSecundario || "#0000ff"})`;
   datosHtml = itemActual.datosInteresantes
    .map(dato => `<strong>${dato.titulo}:</strong> ${dato.valor || 'Sin descripción'}`)
    .join('<br>');
      document.getElementById("info").innerHTML = `
        <div class="info2">
          <figure class="card2">
            <h2 id="categoria">${itemActual.categoria.nombre} </h2>
            <h1 id="name">${itemActual.nombre}</h1>
            <p id="descripcion">${itemActual.descripcion || 'Sin descripción'}</p>
            <img id="imagen" src="${itemActual.url_imagen || ''}" alt="imagen">
            <figcaption id="ciudad">${itemActual.ciudad}</figcaption>
            <figcaption id="pais">${itemActual.pais}</figcaption>
          </figure> 

      

<div class="botones">
  <button onclick="mostrarInfo(1)"><i class="fas fa-lightbulb"></i> Datos interesantes</button>
  <button onclick="mostrarInfo(2)"> <i class="fas fa-map-marker-alt"></i> Coordenadas</button>
  <button onclick="mostrarInfo(3)"><i class="fas fa-tasks"></i> Actividades</button>
</div>

          <div id="resultado"></div>
        </div>
      `;
    } else {
      document.getElementById("info").innerHTML = `<h1>No se encontró el objeto con ese índice</h1>`;
    }
  });

  function mostrarInfo(opcion) {
    if (!itemActual) return;

    const resultado = document.getElementById("resultado");

 if (opcion === 1) {
  if (itemActual.datosInteresantes && itemActual.datosInteresantes.length > 0) {
    resultado.innerHTML = `
      <ul id="datos">
        ${itemActual.datosInteresantes.map(dato => `
          <li>
            <strong>${dato.titulo}</strong>
            <ul class="sub-lista">
              <li>${dato.valor}</li>
            </ul>
          </li>
        `).join("")}
      </ul>
    `;
  } 
}
    else if (opcion === 2) {
      resultado.innerHTML = `
<div class="coordenas">
<h3>Coordenadas:</h3>
        <p>Latitud: ${itemActual.coordenadas.latitud}</p>
<p> Longitud: ${itemActual.coordenadas.longitud}</p>  
</div>      
<iframe
          src="https://www.google.com/maps?q=${itemActual.coordenadas.latitud},${itemActual.coordenadas.longitud}&hl=es&z=14&output=embed">
        </iframe>
      `;
    } 

else if (opcion === 3) {
  if (itemActual.actividadesRecomendadas && itemActual.actividadesRecomendadas.length > 0) {
    resultado.innerHTML = `
      <ul id="act">
        ${itemActual.actividadesRecomendadas.map(a => `
          <li><strong>${a}</strong></li>
        `).join("")}
      </ul>`;
  } else {
    resultado.innerHTML = `<p id="act">Sin descripción</p>`;
  }
}
 
}


  function volver() {
    window.location.href = 'index.html';
  }
</script>


</body>
</html>
